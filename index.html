<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI聊天助手</title>
  <!-- 引入Markdown渲染库 -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/lib/highlight.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/github.min.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- 通知组件 -->
  <div id="notification" class="notification">
    <span class="notification-icon">ℹ️</span>
    <span class="notification-content"></span>
    <button class="notification-close">&times;</button>
  </div>

  <!-- 模型选择弹窗 -->
  <div id="model-select-modal" class="model-select-modal">
    <div class="model-select-title">选择模型 (Ctrl+Alt+T)</div>
    <div class="model-select-search">
      <input type="text" id="model-select-input" class="model-select-input" placeholder="输入模型名称搜索...">
    </div>
    <ul id="model-select-list" class="model-select-list">
      <!-- 模型列表将通过JavaScript动态生成 -->
    </ul>
  </div>
  <div class="container">
    <!-- 侧边栏 -->
    <div class="sidebar">
      <div class="sidebar-header">
        <h2>聊天记录</h2>
        <button id="new-chat-btn" class="button">新对话</button>
      </div>
      <div class="sidebar-content">
        <ul id="chat-list" class="chat-list">
          <!-- 聊天记录列表 -->
        </ul>
      </div>
      <div class="sidebar-footer">
        <button id="settings-btn" class="button button-secondary">模型设置</button>
      </div>
    </div>

    <!-- 主内容区 -->
    <div class="main-content">
      <div id="empty-state" class="empty-state">
        <div class="empty-state-icon">💬</div>
        <div class="empty-state-text">开始一个新的对话，或从左侧选择历史记录</div>
        <button id="start-chat-btn" class="button">开始新对话</button>
      </div>

      <div id="chat-container" style="display: none; flex-direction: column; height: 100%;">
        <div class="chat-header">
          <h2 id="chat-title">新对话</h2>
          <div class="model-selector">
            <span>模型:</span>
            <select id="model-select">
              <!-- 模型选项 -->
            </select>
          </div>
        </div>
        <div id="chat-messages" class="chat-messages">
          <!-- 消息内容 -->
        </div>
        <div class="chat-input">
          <div class="input-container">
            <textarea id="message-input" class="message-input" placeholder="输入消息..." rows="1"></textarea>
            <button id="send-button" class="send-button" disabled>➤</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 模型设置弹窗 -->
  <div id="settings-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">模型设置</h3>
        <button class="close-button" id="close-settings">&times;</button>
      </div>
      <div class="form-group">
        <label for="model-name">模型名称</label>
        <input type="text" id="model-name" placeholder="例如: GPT-3.5">
      </div>
      <div class="form-group">
        <label for="model-id">模型ID</label>
        <input type="text" id="model-id" placeholder="例如: gpt-3.5-turbo">
      </div>
      <div class="form-group">
        <label for="api-url">API地址</label>
        <input type="text" id="api-url" placeholder="例如: https://api.openai.com/v1/chat/completions">
      </div>
      <div class="form-group">
        <label for="api-key">API密钥</label>
        <input type="password" id="api-key" placeholder="输入您的API密钥">
      </div>
      <div class="form-group">
        <label for="system-prompt">系统提示词</label>
        <textarea id="system-prompt" placeholder="输入系统提示词，定义AI助手的行为和特性"></textarea>
      </div>
      <button id="add-model-btn" class="button">添加模型</button>

      <div class="model-list">
        <h4>已添加的模型</h4>
        <div id="model-list-container">
          <!-- 模型列表 -->
        </div>
      </div>
    </div>
  </div>

  <!-- 确认对话框 -->
  <div id="confirm-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">确认删除</h3>
        <button class="close-button" id="close-confirm">&times;</button>
      </div>
      <div class="modal-body">
        <p id="confirm-message">确定要删除这个模型吗？</p>
      </div>
      <div class="modal-footer">
        <button id="confirm-cancel" class="button button-secondary">取消</button>
        <button id="confirm-ok" class="button">确定</button>
      </div>
    </div>
  </div>

  <script src="index.js"></script>
</body>
</html>
